{% load custom_tags %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    {% comment %} <script src="https://cdn.tailwindcss.com"></script> {% endcomment %}
</head>

<style>
    
.theme-btn.newSuccessBtnFocus {
  color: #28cd38;
  background-color: #28CD3826;
  border: 1px solid #28cd38;
  text-transform: capitalize;
  padding-left: 0.8rem;
  padding-right: 0.8rem;
  padding-top: 0.6rem;
  padding-bottom: 0.6rem;
  font-weight: 500;
  font-size: 0.7rem;
  line-height: 1;
  text-transform: uppercase;
  border-radius: 0.375rem;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
    0 2px 4px -1px rgba(0, 0, 0, 0.06);
  transition: box-shadow 150ms ease-in-out;
  display: flex;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
  width: fit-content;
}

/* Tailwind CSS styles */
.relative { position: relative; }
.overflow-hidden { overflow: hidden; }
.rounded-2xl { border-radius: 1rem; }
.flex { display: flex; }
.items-center { align-items: center; }
.justify-center { justify-content: center; }
.h-screen { height: 100vh; }
.w-full { width: 100%; }
.z-[2] { z-index: 2; }
.slide-in-elliptic-top-fwd { animation: slide-in-elliptic-top-fwd 0.75s ease-out both; }
.bg-white { background-color: #fff; }
.shadow-2xl { box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); }
.border { border-width: 1px; }
.sm\\:min-w-\\[25rem\\] { min-width: 25rem; }
.pt-4 { padding-top: 1rem; }
.sticky { position: sticky; }
.top-0 { top: 0; }
.z-[22] { z-index: 22; }
.text-center { text-align: center; }
.overflow-y-auto { overflow-y: auto; }
.overflow-x-hidden { overflow-x: hidden; }
.scroll-hidden { scrollbar-width: none; }
.max-h-[65vh] { max-height: 65vh; }
.font-bold { font-weight: 700; }
.text-xl { font-size: 1.25rem; }
.normal-case { text-transform: none; }
.space-y-3 > :not([hidden]) ~ :not([hidden]) { margin-top: 1rem; }
.text-sm { font-size: 0.875rem; }
.text-left { text-align: left; }
.font-semibold { font-weight: 600; }
.py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
.border-t { border-top-width: 1px; }
.text-lg { font-size: 1.125rem; }
.font-medium { font-weight: 500; }
.text-[#7B7B7B] { color: #7b7b7b; }
.text-primary { color: #000; }
.text-base { font-size: 1rem; }
.border-t { border-top-width: 1px; }
.pb-2 { padding-bottom: 0.5rem; }
.text-base { font-size: 1rem; }
.border-t { border-top-width: 1px; }
.text-left { text-align: left; }
.text-[#000] { color: #000; }
.text-sm { font-size: 0.875rem; }
.text-[#7B7B7B] { color: #7b7b7b; }
.font-medium { font-weight: 500; }
.font-semibold { font-weight: 600; }
.sticky { position: sticky; }
.top-0 { top: 0; }
.z-[22] { z-index: 22; }
.h-screen { height: 100vh; }
.w-full { width: 100%; }
.pt-[1.2rem] { padding-top: 1.2rem; }
.scroll-hidden::-webkit-scrollbar { display: none; }
.font-bold { font-weight: 700; }
.text-xl { font-size: 1.25rem; }
.normal-case { text-transform: none; }
.gap-5 > :not([hidden]) ~ :not([hidden]) { gap: 1.25rem; }
.text-sm { font-size: 0.875rem; }
.text-left { text-align: left; }
.justify-between { justify-content: space-between; }
.font-semibold { font-weight: 600; }
.text-lg { font-size: 1.125rem; }
.text-primary { color: #000; }
.text-[#7B7B7B] { color: #7b7b7b; }
.font-medium { font-weight: 500; }
.py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
.border-t { border-top-width: 1px; }
.text-base { font-size: 1rem; }
.pb-2 { padding-bottom: 0.5rem; }
.text-[#000] { color: #000; }
.flex-col { flex-direction: column; }
.border-t { border-top-width: 1px; }
.text-primary { color: #000; }
.font-semibold { font-weight: 600; }
.text-base { font-size: 1rem; }
.py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
.border-t { border-top-width: 1px; }
.text-[#7B7B7B] { color: #7b7b7b; }
.text-sm { font-size: 0.875rem; }
.font-medium { font-weight: 500; }
.border-t { border-top-width: 1px; }
.text-primary { color: #000; }
.text-sm { font-size: 0.875rem; }
.font-bold { font-weight: 700; }
.border-t { border-top-width: 1px; }
.text-[#7B7B7B] { color: #7b7b7b; }
.text-sm { font-size: 0.875rem; }
.font-medium { font-weight: 500; }
.text-primary { color: #000; }
.font-semibold { font-weight: 600; }
.border-t { border-top-width: 1px; }
.text-base { font-size: 1rem; }
.py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
.text-left { text-align: left; }
.text-[#000] { color: #000; }
.font-semibold { font-weight: 600; }
.text-lg { font-size: 1.125rem; }
.text-left { text-align: left; }
.text-[#7B7B7B] { color: #7b7b7b; }
.text-sm { font-size: 0.875rem; }
.font-medium { font-weight: 500; }
.border-t { border-top-width: 1px; }
.text-primary { color: #000; }
.font-bold { font-weight: 700; }
.border-t { border-top-width: 1px; }
.text-left { text-align: left; }
.text-[#7B7B7B] { color: #7b7b7b; }
.text-sm { font-size: 0.875rem; }
.font-medium { font-weight: 500; }
.text-base { font-size: 1rem; }
.font-semibold { font-weight: 600; }
.text-base { font-size: 1rem; }
.text-[#7B7B7B] { color: #7b7b7b; }
.font-semibold { font-weight: 600; }
.text-base { font-size: 1rem; }
.text-[#7B7B7B] { color: #7b7b7b; }
.font-semibold { font-weight: 600; }
.text-base { font-size: 1rem; }
.text-[#7B7B7B] { color: #7b7b7b; }
.font-semibold { font-weight: 600; }
.text-base { font-size: 1rem; }
.text-[#7B7B7B] { color: #7b7b7b; }
.font-semibold { font-weight: 600; }
.text-base { font-size: 1rem; }
.text-[#7B7B7B] { color: #7b7b7b; }
.font-semibold { font-weight: 600; }
.text-base { font-size: 1rem; }
.text-[#7B7B7B] { color: #7b7b7b; }
.font-semibold { font-weight: 600; }
.text-base { font-size: 1rem; }
.text-[#7B7B7B] { color: #7b7b7b; }

/* Tailwind CSS animations */
@keyframes slide-in-elliptic-top-fwd {
    0% {
        transform: translateY(-1000px) scaleY(2.5) scaleX(0.2);
        transform-origin: 50% 0;
        filter: blur(40px);
        opacity: 0;
    }

    100% {
        transform: translateY(0) scaleY(1) scaleX(1);
        transform-origin: 50% 50%;
        filter: blur(0px);
        opacity: 1;
    }
}

/* Additional custom styles */
@page {
    size: 25rem;
    margin: 1cm;
}

</style>

<body>
    <div
        class="relative overflow-hidden rounded-2xl flex items-center justify-center h-screen w-full z-[2] slide-in-elliptic-top-fwd">
        <div class="bg-white rounded-2xl shadow-2xl border sm:min-w-[25rem] min-w-full pt-4">
            <div class="sticky top-0 z-[22]">
                <div class="flex justify-center items-center"><svg width="4.4rem" height="4.4rem" viewBox="0 0 71 71"
                        fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M33.4161 70.9992C32.07 70.8168 30.7153 70.6848 29.3779 70.4469C21.2131 68.9949 14.3769 65.1339 8.88504 58.9421C3.85864 53.2731 0.923394 46.6279 0.188713 39.0988C-0.716177 29.8328 1.63028 21.4004 7.29062 13.9876C12.6123 7.01945 19.6135 2.57142 28.2021 0.775535C30.559 0.282275 33.0044 0.167644 35.4186 0.00611841C36.9141 -0.0946179 38.0708 1.06211 38.1455 2.4759C38.2254 3.9852 37.2649 5.12283 35.7052 5.29999C33.6436 5.53272 31.5472 5.57788 29.5169 5.96693C24.2577 6.97256 19.6221 9.31381 15.6118 12.8761C10.2311 17.6558 6.83731 23.5784 5.75179 30.689C4.35364 39.8508 6.64973 48.0591 12.6835 55.1384C16.6904 59.8383 21.6907 63.0966 27.6863 64.5903C38.1264 67.192 47.5139 65.0071 55.6215 57.86C60.9466 53.1654 64.1077 47.2219 65.2626 40.2294C65.5093 38.7323 65.5266 37.1952 65.6308 35.6755C65.7611 33.7788 67.0151 32.6204 68.7311 32.8618C69.9486 33.0337 70.5843 33.8726 70.9994 34.9373V37.5721C70.9421 38.0706 70.8848 38.5708 70.8292 39.0692C69.9799 46.7096 67.062 53.4502 61.9123 59.1661C56.4447 65.2346 49.6711 69.0227 41.6104 70.4486C40.2748 70.6848 38.9201 70.8185 37.5758 71.0009H33.4143L33.4161 70.9992Z"
                            fill="#2CAE4A"></path>
                        <path
                            d="M33.1105 41.8709C33.3745 41.5201 33.5048 41.296 33.6837 41.1171C44.056 30.7639 54.4336 20.4158 64.8025 10.0591C65.5789 9.28447 66.4091 8.74605 67.5623 8.96489C69.5093 9.3331 70.3969 11.5788 69.2123 13.1663C69.0334 13.406 68.8163 13.6179 68.6044 13.8298C57.4939 24.916 46.3834 36.0022 35.2711 47.0866C33.6837 48.6706 32.1969 48.6481 30.6928 47.0154C26.3699 42.3225 22.0469 37.6313 17.7309 32.9332C16.5811 31.6809 16.5915 30.0084 17.7222 28.9767C18.8233 27.9728 20.4177 28.0301 21.5154 29.1643C22.5593 30.2446 23.5597 31.3666 24.5775 32.4712C27.3164 35.4464 30.0572 38.4233 32.7944 41.402C32.8726 41.4871 32.9264 41.5948 33.1105 41.8727V41.8709Z"
                            fill="#2CAE4A"></path>
                    </svg></div>
            </div>
            <div
                class="p-[1.2rem] overflow-y-auto overflow-x-hidden scroll-hidden max-h-[65vh]  text-center flex flex-col gap-5">
                <h1 class="font-bold text-xl normal-case">
                    <p><p>{{ business_address.primary_translation.invoice }} </p>
                    {% if business_address.secondary_translation.invoice %} 
                    <p class="arabic">{{ business_address.secondary_translation.invoices }} 
                      {% endif %}</p>
                  #{{invoice_id}}
                </h1>
                <div class="space-y-3">
                    
                    <div class="w-full flex justify-between items-center gap-2 text-sm text-center">
                        <div class="flex flex-col justify-between">
                            <div class="text-left">
                                <p class="text-sm">{{created_at}}</p>
                            </div>
                            <div>
                                <p>Billed to <span class="font-bold"> {% if client %} {{ client.full_name }} {% else %} Walk In {% endif %} </span></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                  {% comment %} --------------------------- data main div ---------------------------------------{% endcomment %}
                    <div>

                          <div class="text-left flex flex-col">

                            <div class="flex items-center justify-between text-[#000] font-semibold text-sm  pb-2">
                                <p class="text-left text-lg font-semibold">{{ business_address.primary_translation.items}} 
                                {% if business_address.secondary_translation.items%}
                                <span class="arabic">{{ business_address.secondary_translation.items }} 
                                  {% endif %}
                                </span>
                              </p>
                                <p class="text-lg font-semibold">{{ business_address.primary_translation.amount}} 
                                  {% if business_address.secondary_translation.amount %}<span class="arabic">
                                    {{business_address.secondary_translation.amount}} {% endif %}</span></p>
                            </div>

                            {% comment %} ---------------------- product data rendering ------------------- {% endcomment %}
                            
                            {% if checkout_data.products_records.all %}
                              
                              {% for item in checkout_data.products_records.all %}
                                  <div class="flex items-center justify-between text-primary text-sm font-medium text-[#7B7B7B] py-2 border-t">
                                    <div>
                                        <p class="text-left">{{item.product.name}}
                                          {% if item.discount_percentage %}
                                          (Discount {{ item.discount_percentage}} %)
                                          {% endif %}<br></p>
                                        <p class="arabic">{% get_secondary_translation item.id %}</p>
                                  </div>
                                  <p><span class="text-[#7B7B7B]">{{item.quantity}} x&nbsp;</span>{{item.price}}
                                    {{currency_code}}</p>
                                  </div>
                              {% endfor %}
                                
                            {% endif %}

                            {% comment %}-------------------- service data rendering -------------------------- {% endcomment %}
                            {% if checkout_data.services_records.all %}
                              
                              {% for item in checkout_data.services_records.all %}

                                  <div class="flex items-center justify-between text-primary text-sm font-medium text-[#7B7B7B] py-2 border-t">
                                    <div>
                                        <p class="text-left">{{item.service.name}}
                                          {% if item.discount_percentage %}
                                          (Discount {{ item.discount_percentage}} %)
                                          {% endif %}<br></p>
                                        <p class="arabic">{% get_secondary_translation item.id %}</p>
                                  </div>
                                  <p><span class="text-[#7B7B7B]">{{item.quantity}} x&nbsp;</span>{{item.price}}
                                    {{currency_code}}</p>
                                  </div>

                              {% endfor %}
                                
                            {% endif %}
                            


                            {% comment %}---------------------  appointment services data rendering  ----------------------{% endcomment %}
                            
                            {% if checkout_data.checkout_type == "Group Appointment" or checkout_data.checkout_type == "Appointment" and checkout_data.client_type == 'In_Saloon' %}
                              
                              {% if checkout_data.appointment_services.all and clients %}
                                
                                {% for c in clients %}
                                  <h3 class="text-lg font-semibold">{{c.client.full_name}}</h3>
                                  {% comment %}------------- appointment services data --------------{% endcomment %}
                                  {% for data in checkout_data.appointment_services.all %}
                                    
                                    {% if data.client.id == c.client.id %}
                                        <div class="flex items-center justify-between text-primary text-sm font-medium text-[#7B7B7B] py-2 border-t">
                                          <div>
                                              <p class="text-left">{{data.service.name}}
                                                {% if data.discount_percentage %}
                                                (Discount {{ data.discount_percentage}} %)
                                                {% endif %}<br></p>
                                              <p class="arabic">{% get_secondary_translation data.id %}</p>
                                        </div>
                                        <p><span class="text-[#7B7B7B]">1 x&nbsp;</span>{{data.price}}
                                          {{currency_code}}</p>
                                        </div>
                                      
                                    {% endif %}
                                      
                                  {% endfor %}


                                  {% comment %}---------------- coupon data -----------------{% endcomment %}
                                  {% if checkout_data.applied_coupons_records.all %}
                                    {% for coupon in checkout_data.applied_coupons_records.all %}
                                        {% if coupon.client.id == c.client.id %}
                                          <div class="flex items-center justify-between text-primary font-semibold text-base">
                                            <div>
                                                <p>Coupon Redeemed</p>
                                            </div>
                                            <p class="text-sm font-medium text-[#7B7B7B]">{{ coupon.coupon_discounted_price }}
                                              {{ currency_code }}</p>
                                          </div>
                                        {% endif %}
                                          
                                    {% endfor %}
                                  {% endif %}

                                  {% comment %}---------------  membership redeemed ---------------{% endcomment %}
                                  {% if checkout_data.applied_memberships_records.all %}
                                    {% for m in checkout_data.applied_memberships_records.all %}
                                        {% if m.client.id == c.client.id %}
                                          <div class="flex items-center justify-between text-primary font-semibold text-base">
                                            <div>
                                                <p>Membership Redeemed</p>
                                            </div>
                                            <p class="text-sm font-medium text-[#7B7B7B]">{{ m.price }}
                                              {{ currency_code }}</p>
                                          </div>
                                        {% endif %}
                                          
                                    {% endfor %}
                                  {% endif %}

                                  {% comment %}--------------- voucher redeemed -----------------------{% endcomment %}

                                  {% if checkout_data.applied_memberships_records.all %}
                                    {% for v in checkout_data.applied_memberships_records.all %}
                                        {% if v.client.id == c.client.id %}
                                          <div class="flex items-center justify-between text-primary font-semibold text-base">
                                            <div>
                                                <p>Voucher Redeemed</p>
                                            </div>
                                            <p class="text-sm font-medium text-[#7B7B7B]">{{ v.price }}
                                              {{ currency_code }}</p>
                                          </div>
                                        {% endif %}
                                          
                                    {% endfor %}
                                  {% endif %}
                                  
                                  {% comment %}------------- loyalty point redeemed ------------------------{% endcomment %}
                                  {% if checkout_data.applied_loyalty_points_records.all %}
                                    {% for l in checkout_data.applied_loyalty_points_records.all %}
                                        {% if l.client.id == c.client.id %}
                                          <div class="flex items-center justify-between text-primary font-semibold text-base">
                                            <div>
                                                <p>Loyalty Redeemed</p>
                                            </div>
                                            <p class="text-sm font-medium text-[#7B7B7B]">{{ l.price }}
                                              {{ currency_code }}</p>
                                          </div>

                                        {% endif %}
                                          
                                    {% endfor %}
                                  {% endif %}

                                  {% comment %}------------- gift card redeemed  -----------{% endcomment %}
                                  {% if checkout_data.applied_gift_cards_records.all %}
                                    {% for g in checkout_data.applied_gift_cards_records.all %}
                                        {% if g.client.id == c.client.id %}
                                          <div class="flex items-center justify-between text-primary font-semibold text-base">
                                            <div>
                                                <p>Gift Card Redeemed</p>
                                            </div>
                                            <p class="text-sm font-medium text-[#7B7B7B]">{{ g.partial_price }}
                                              {{ currency_code }}</p>
                                          </div>

                                        {% endif %}
                                          
                                    {% endfor %}
                                  {% endif %}
                                {% comment %} --------------- End in client for loop ------------ {% endcomment %}
                                {% endfor %}
                              {% endif %}

                              {% else %}
                                  {% for data in checkout_data.appointment_services.all %}
                                    
                                    {% if data.client.id == c.client.id %}
                                        <div class="flex items-center justify-between text-primary text-sm font-medium text-[#7B7B7B] py-2 border-t">
                                          <div>
                                              <p class="text-left">{{data.service.name}}
                                                {% if data.discount_percentage %}
                                                (Discount {{ data.discount_percentage}} %)
                                                {% endif %}<br></p>
                                              <p class="arabic">{% get_secondary_translation data.id %}</p>
                                        </div>
                                        <p><span class="text-[#7B7B7B]">1 x&nbsp;</span>{{data.price}}
                                          {{currency_code}}</p>
                                        </div>
                                      
                                    {% endif %}
                                      
                                  {% endfor %}
                            {% endif %}

                            {% comment %} ==========if there is any gift_cards_records in the checkout_data ========================{% endcomment %}

                            
                            {% if checkout_data.gift_cards_records.all %}
                            
                              {% for item in checkout_data.gift_cards_records.all %}
                                <div class="flex items-center justify-between text-primary text-sm font-medium text-[#7B7B7B] py-2 border-t">
                                          <div>
                                              <p class="text-left">{{item.service.name}}
                                                {% if item.discount_percentage %}
                                                (Discount {{ item.discount_percentage}} %)
                                                {% endif %}<br></p>
                                              <p class="arabic">{% get_secondary_translation item.id %}</p>
                                        </div>
                                        <p><span class="text-[#7B7B7B]">{{item.quantity}} x&nbsp;</span>{{item.price}}
                                          {{currency_code}}</p>
                                        </div>
                              {% endfor %}
                              
                              
                            {% endif %}

                            {% comment %}------------------------- membership records -----------------{% endcomment %}
                            {% if checkout_data.membership_records.all %}
                            
                              {% for item in checkout_data.membership_records.all %}
                                <div class="flex items-center justify-between text-primary text-sm font-medium text-[#7B7B7B] py-2 border-t">
                                          <div>
                                              <p class="text-left">{{item.service.name}}
                                                {% if item.discount_percentage %}
                                                (Discount {{ item.discount_percentage}} %)
                                                {% endif %}<br></p>
                                              <p class="arabic">{% get_secondary_translation item.id %}</p>
                                        </div>
                                        <p><span class="text-[#7B7B7B]">{{item.quantity}} x&nbsp;</span>{{item.price}}
                                          {{currency_code}}</p>
                                        </div>
                              {% endfor %}
                            {% endif %}

                            {% comment %}--------------- voucher records ----------------- {% endcomment %}
                            {% if  checkout_data.vouchers_records.all %}
                            
                              {% for item in checkout_data.vouchers_records.all %}
                                <div class="flex items-center justify-between text-primary text-sm font-medium text-[#7B7B7B] py-2 border-t">
                                          <div>
                                              <p class="text-left">{{item.service.name}}
                                                {% if item.discount_percentage %}
                                                (Discount {{ item.discount_percentage}} %)
                                                {% endif %}<br></p>
                                              <p class="arabic">{% get_secondary_translation item.id %}</p>
                                        </div>
                                        <p><span class="text-[#7B7B7B]">{{item.quantity}} x&nbsp;</span>{{item.price}}
                                          {{currency_code}}</p>
                                        </div>
                              {% endfor %}
                            {% endif %}
                              
                            
                            {% if checkout_data.services_records.all or checkout_data.products_records.all %}
                                  {% if checkout_data.applied_coupons_records.all %}
                                  {% for coupon in checkout_data.applied_coupons_records.all %}
                                      {% if coupon.client.id == c.client.id %}
                                        <div class="flex items-center justify-between text-primary font-semibold text-base">
                                          <div>
                                              <p>Coupon Redeemed</p>
                                          </div>
                                          <p class="text-sm font-medium text-[#7B7B7B]">{{ coupon.coupon_discounted_price }}
                                            {{ currency_code }}</p>
                                        </div>
                                      {% endif %}
                                        
                                  {% endfor %}
                                {% endif %}

                                {% comment %}---------------  membership redeemed ---------------{% endcomment %}
                                {% if checkout_data.applied_memberships_records.all %}
                                  {% for m in checkout_data.applied_memberships_records.all %}
                                      {% if m.client.id == c.client.id %}
                                        <div class="flex items-center justify-between text-primary font-semibold text-base">
                                          <div>
                                              <p>Membership Redeemed</p>
                                          </div>
                                          <p class="text-sm font-medium text-[#7B7B7B]">{{ m.price }}
                                            {{ currency_code }}</p>
                                        </div>
                                      {% endif %}
                                        
                                  {% endfor %}
                                {% endif %}

                                {% comment %}--------------- voucher redeemed -----------------------{% endcomment %}

                                {% if checkout_data.applied_memberships_records.all %}
                                  {% for v in checkout_data.applied_memberships_records.all %}
                                      {% if v.client.id == c.client.id %}
                                        <div class="flex items-center justify-between text-primary font-semibold text-base">
                                          <div>
                                              <p>Voucher Redeemed</p>
                                          </div>
                                          <p class="text-sm font-medium text-[#7B7B7B]">{{ v.price }}
                                            {{ currency_code }}</p>
                                        </div>
                                      {% endif %}
                                        
                                  {% endfor %}
                                {% endif %}
                                
                                {% comment %}------------- loyalty point redeemed ------------------------{% endcomment %}
                                {% if checkout_data.applied_loyalty_points_records.all %}
                                  {% for l in checkout_data.applied_loyalty_points_records.all %}
                                      {% if l.client.id == c.client.id %}
                                        <div class="flex items-center justify-between text-primary font-semibold text-base">
                                          <div>
                                              <p>Loyalty Redeemed</p>
                                          </div>
                                          <p class="text-sm font-medium text-[#7B7B7B]">{{ l.price }}
                                            {{ currency_code }}</p>
                                        </div>

                                      {% endif %}
                                        
                                  {% endfor %}
                                {% endif %}

                                {% comment %}------------- gift card redeemed  -----------{% endcomment %}
                                {% if checkout_data.applied_gift_cards_records.all %}
                                  {% for g in checkout_data.applied_gift_cards_records.all %}
                                      {% if g.client.id == c.client.id %}
                                        <div class="flex items-center justify-between text-primary font-semibold text-base">
                                          <div>
                                              <p>Gift Card Redeemed</p>
                                          </div>
                                          <p class="text-sm font-medium text-[#7B7B7B]">{{ g.partial_price }}
                                            {{ currency_code }}</p>
                                        </div>

                                      {% endif %}
                                        
                                  {% endfor %}
                                {% endif %}
                              
                            {% endif %}
                    </div>
                        
                    </div>
                    <div class="text-left flex flex-col gap-2 border-t py-2">
                      {% comment %}--------------- total tip applied ----------------{% endcomment %}
                      
                      {% if tip %}
                      <div class="flex items-center justify-between text-primary text-sm font-medium">
                              <div>
                                  <p> {{ business_address.primary_translation.tips }} </p>
                                  {% if business_address.secondary_translation.tips %}<p class="arabic">{{business_address.secondary_translation.tips }} {% endif %}</p>
                              </div>
                              <p class="text-sm font-medium text-[#7B7B7B]">{{ total_tip }} {{ currency_code }}</p>
                      </div>
                            
                      {% endif %}
                            
                        {% comment %}---------------------- subtotal  -----------------------{% endcomment %}

                          <div class="flex items-center justify-between text-primary text-base font-bold border-t py-2">
                              <div>
                                  <p class="text-left">{{ business_address.primary_translation.subtotal}}</p>
                                  {% if business_address.secondary_translation.subtotal %}
                                  <p class="arabic">
                                    {{business_address.secondary_translation.subtotal }} {% endif %}</p>
                                </div>
                              </div>
                              <p class="text-sm ">{{sub_total}} {{currency_code}}</p>
                          </div>

                        {% comment %} ------------------------ total tax --------------------{% endcomment %}
                        
                        {% if checkout_data.tax_records.all %}
                          
                          {% for tax in checkout_data.tax_records.all %}
                            <div class="flex items-center justify-between text-primary text-sm font-medium">
                                <div>
                                    <p>{{tax.name}} ({{tax.tax_rate}}%)</p>
                                </div>
                                <p class="text-sm font-medium text-[#7B7B7B]">{{ tax.value }} {{ currency_code }}</p>
                            </div>
                            
                          {% endfor %}
                        {% endif %}
                        
                    </div>
                    {% comment %}----------------- total bill  ----------------{% endcomment %}
                    
                    <div class="flex items-center justify-between text-primary text-base font-bold border-t py-2">
                        <p class="text-left">{{ business_address.primary_translation.total}}</p>
                        {% if business_address.secondary_translation.total %}<p class="arabic">
                          {{business_address.secondary_translation.total }} {% endif %}</p>
                        <p class="text-sm ">{{total}} {{currency_code}}</p>
                        {% comment %} ------------- change ----------------{% endcomment %}
                        {% if change > 0 %}
                        <p class="text-left">{{ business_address.primary_translation.change}}</p>
                        {% if business_address.secondary_translation.change %}<p class="arabic">
                          {{business_address.secondary_translation.change }} {% endif %}</p>
                        <p class="text-sm ">{{change}} {{currency_code}}</p>
                          
                        {% endif %}
                          
                    </div>

                    {% comment %}-------------------- payment methods ------------------ {% endcomment %}
                    
                    <div class="text-left flex flex-col gap-2 border-t py-2">

                        <div class="flex items-center justify-between text-primary font-semibold text-lg">
                            <p>{{ business_address.primary_translation.payment_method}}</p>
                            {% if business_address.secondary_translation.payment_method %}<p class="arabic">
                              {{business_address.secondary_translation.payment_method }} {% endif %}</p>
                        </div>

                        
                        {% if checkout_data.payment_methods_records.all %}
                          
                          {% for method in checkout_data.payment_methods_records.alls %}
                            
                            <div class="flex items-center flex-col justify-between text-primary">
                                <div class="flex items-center justify-between text-[#000] font-semibold w-full text-sm">
                                    <p class="font-semibold">{{method.payment_method}}</p>
                                    <p class="text-sm text-[#7B7B7B] font-medium">{{ method.amount }} {{ currency_code }}</p>
                                </div>
                            </div>

                          {% endfor %}
                            
                        {% endif %}


                    </div>


                    <div class="flex items-center justify-between text-primary text-sm font-bold border-t py-2">
                        <div class="flex items-center justify-between text-primary text-sm">
                            <p class="">Payment on <span class="text-[#7B7B7B]"> {{created_at|date:"Y-m-d"}}</span> at <span
                                    class="text-[#7B7B7B]">{{created_at|date:"H:i:s"}}</span></p>
                        </div>
                    </div>

                    
                </div>
            </div>
        </div>
    </div>
</body>

</html> 